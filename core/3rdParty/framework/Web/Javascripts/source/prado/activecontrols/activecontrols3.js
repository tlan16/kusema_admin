Prado.WebUI.CallbackControl=Class.extend(Prado.WebUI.PostBackControl,{onPostBack:function(a,b){(new Prado.CallbackRequest(b.EventTarget,b)).dispatch();Event.stop(a)}});Prado.WebUI.TActiveButton=Class.extend(Prado.WebUI.CallbackControl);Prado.WebUI.TActiveLinkButton=Class.extend(Prado.WebUI.CallbackControl);
Prado.WebUI.TActiveImageButton=Class.extend(Prado.WebUI.TImageButton,{onPostBack:function(a,b){this.addXYInput(a,b);(new Prado.CallbackRequest(b.EventTarget,b)).dispatch();Event.stop(a);this.removeXYInput(a,b)}});Prado.WebUI.TActiveCheckBox=Class.extend(Prado.WebUI.CallbackControl,{onPostBack:function(a,b){0==(new Prado.CallbackRequest(b.EventTarget,b)).dispatch()&&Event.stop(a)}});Prado.WebUI.TActiveRadioButton=Class.extend(Prado.WebUI.TActiveCheckBox);
Prado.WebUI.TActiveCheckBoxList=Base.extend({constructor:function(a){Prado.Registry.set(a.ListID,this);for(var b=0;b<a.ItemCount;b++){var c=Object.extend({ID:a.ListID+"_c"+b,EventTarget:a.ListName+"$c"+b},a);new Prado.WebUI.TActiveCheckBox(c)}}});Prado.WebUI.TActiveRadioButtonList=Prado.WebUI.TActiveCheckBoxList;
Prado.WebUI.TActiveTextBox=Class.extend(Prado.WebUI.TTextBox,{onInit:function(a){this.options=a;"MultiLine"!=a.TextMode&&this.observe(this.element,"keydown",this.handleReturnKey.bind(this));1==this.options.AutoPostBack&&this.observe(this.element,"change",this.doCallback.bindEvent(this,a))},doCallback:function(a,b){(new Prado.CallbackRequest(b.EventTarget,b)).dispatch();Prototype.Browser.IE||Event.stop(a)}});Prado.WebUI.TAutoComplete=Class.extend(Autocompleter.Base,Prado.WebUI.TActiveTextBox.prototype);
Prado.WebUI.TAutoComplete=Class.extend(Prado.WebUI.TAutoComplete,{initialize:function(a){this.options=a;this.observers=[];this.hasResults=!1;this.baseInitialize(a.ID,a.ResultPanel,a);Object.extend(this.options,{onSuccess:this.onComplete.bind(this)});if(a.AutoPostBack)this.onInit(a);Prado.Registry.set(a.ID,this)},doCallback:function(a,b){this.active||((new Prado.CallbackRequest(this.options.EventTarget,b)).dispatch(),Event.stop(a))},onClick:function(a){this.index=Event.findElement(a,"LI").autocompleteIndex;
this.selectEntry();this.hide();Event.fireEvent(this.element,"change")},getUpdatedChoices:function(){var a=[this.getToken(),"__TAutoComplete_onSuggest__"];Prado.Callback(this.options.EventTarget,a,null,this.options)},selectEntry:function(){this.hasResults&&(this.active=!1,this.updateElement(this.getCurrentEntry()),Prado.Callback(this.options.EventTarget,[this.index,"__TAutoComplete_onSuggestionSelected__"],null,this.options))},onComplete:function(a,b){var c=Prado.Element.extractContent(a.transport.responseText,
b);"string"==typeof c&&(0<c.length?(this.hasResults=!0,this.updateChoices(c)):(this.hasResults=this.active=!1,this.hide()))}});
Prado.WebUI.TTimeTriggeredCallback=Class.create(Prado.WebUI.Control,{onInit:function(a){this.options=Object.extend({Interval:1},a||{});Prado.WebUI.TTimeTriggeredCallback.registerTimer(this)},startTimer:function(){if("undefined"==typeof this.timer||null==this.timer)this.timer=this.setInterval(this.onTimerEvent.bind(this),1E3*this.options.Interval)},stopTimer:function(){"undefined"!=typeof this.timer&&(this.clearInterval(this.timer),this.timer=null)},resetTimer:function(){"undefined"!=typeof this.timer&&
(this.clearInterval(this.timer),this.timer=null,this.timer=this.setInterval(this.onTimerEvent.bind(this),1E3*this.options.Interval))},onTimerEvent:function(){(new Prado.CallbackRequest(this.options.EventTarget,this.options)).dispatch()},setTimerInterval:function(a){this.options.Interval!=a&&(this.options.Interval=a,this.resetTimer())},onDone:function(){this.stopTimer()}});
Object.extend(Prado.WebUI.TTimeTriggeredCallback,{timers:{},registerTimer:function(a){Prado.WebUI.TTimeTriggeredCallback.timers[a.options.ID]=a},start:function(a){Prado.WebUI.TTimeTriggeredCallback.timers[a]&&Prado.WebUI.TTimeTriggeredCallback.timers[a].startTimer()},stop:function(a){Prado.WebUI.TTimeTriggeredCallback.timers[a]&&Prado.WebUI.TTimeTriggeredCallback.timers[a].stopTimer()},setTimerInterval:function(a,b){Prado.WebUI.TTimeTriggeredCallback.timers[a]&&Prado.WebUI.TTimeTriggeredCallback.timers[a].setTimerInterval(b)}});
Prado.WebUI.ActiveListControl=Class.create(Prado.WebUI.Control,{onInit:function(a){this.element&&(this.options=a,this.observe(this.element,"change",this.doCallback.bind(this)))},doCallback:function(a){(new Prado.CallbackRequest(this.options.EventTarget,this.options)).dispatch();Event.stop(a)}});Prado.WebUI.TActiveDropDownList=Class.create(Prado.WebUI.ActiveListControl);Prado.WebUI.TActiveListBox=Class.create(Prado.WebUI.ActiveListControl);
Prado.WebUI.TEventTriggeredCallback=Class.create(Prado.WebUI.Control,{onInit:function(a){this.options=a||{};(a=$(a.ControlID))&&this.observe(a,this.getEventName(a),this.doCallback.bind(this))},getEventName:function(a){var b=this.options.EventName;if("undefined"==typeof b&&a.type)switch(a.type.toLowerCase()){case "password":case "text":case "textarea":case "select-one":case "select-multiple":return"change"}return"undefined"==typeof b||"undefined"==b?"click":b},doCallback:function(a){(new Prado.CallbackRequest(this.options.EventTarget,
this.options)).dispatch();1==this.options.StopEvent&&Event.stop(a)}});
Prado.WebUI.TValueTriggeredCallback=Class.create(Prado.WebUI.Control,{count:1,observing:!0,onInit:function(a){this.options=a||{};this.options.PropertyName=this.options.PropertyName||"value";this.value=(a=$(a.ControlID))?a[this.options.PropertyName]:void 0;Prado.WebUI.TValueTriggeredCallback.register(this);this.startObserving()},stopObserving:function(){this.clearTimeout(this.timer);this.observing=!1},startObserving:function(){this.timer=this.setTimeout(this.checkChanges.bind(this),1E3*this.options.Interval)},
checkChanges:function(){var a=$(this.options.ControlID);a&&(a=a[this.options.PropertyName],this.value!=a?(this.doCallback(this.value,a),this.value=a,this.count=1):this.count+=this.options.Decay,this.observing&&(this.time=this.setTimeout(this.checkChanges.bind(this),parseInt(1E3*this.options.Interval*this.count))))},doCallback:function(a,b){var c=new Prado.CallbackRequest(this.options.EventTarget,this.options);c.setCallbackParameter({OldValue:a,NewValue:b});c.dispatch()},onDone:function(){this.observing&&
this.stopObserving()}});Object.extend(Prado.WebUI.TValueTriggeredCallback,{timers:{},register:function(a){Prado.WebUI.TValueTriggeredCallback.timers[a.options.ID]=a},stop:function(a){Prado.WebUI.TValueTriggeredCallback.timers[a].stopObserving()}});Prado.WebUI.TActiveTableCell=Class.create(Prado.WebUI.CallbackControl);Prado.WebUI.TActiveTableRow=Class.create(Prado.WebUI.CallbackControl);