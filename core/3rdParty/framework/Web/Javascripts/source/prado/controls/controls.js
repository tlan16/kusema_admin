Prado.WebUI=Class.create();
Prado.WebUI.Control=Class.create({initialize:function(a){this.registered=!1;this.ID=a.ID;this.element=$(this.ID);this.observers=[];this.intervals=[];var b;(b=Prado.Registry.get(this.ID))?this.replace(b,a):this.register(a);if(this===Prado.Registry.get(this.ID)&&(this.registered=!0,this.onInit))this.onInit(a)},register:function(a){return Prado.Registry.set(a.ID,this)},deregister:function(){if(Prado.Registry.get(this.ID)===this)return Prado.Registry.unset(this.ID);debugger},replace:function(a,b){a.deinitialize&&
a.deinitialize();return this.register(b)},observe:function(a,b,c){a={_element:a,_eventName:b,_handler:c};this.observers.push(a);return Event.observe(a._element,a._eventName,a._handler)},findObserver:function(a,b,c){for(var d=-1,e=0;e<this.observers.length;e++){var f=this.observers[e];if(f._element===a&&f._eventName===b&&f._handler===c){d=e;break}}return d},stopObserving:function(a,b,c){var d=this.findObserver(a,b,c);if(-1!=d)this.observers=this.observers.without(this.observers[d]);else debugger;return Event.stopObserving(a,
b,c)},setTimeout:function(a,b){if(!Object.isFunction(a)){var c=a;a=function(){return eval(c)}}var d=this;return window.setTimeout(function(){d.isLingering()||a();d=null},b)},clearTimeout:function(a){return window.clearTimeout(a)},setInterval:function(a,b){Object.isFunction(a)||(a=function(){eval(a)});var c=this,d=window.setInterval(function(){c.isLingering()||a()},b);this.intervals.push(d);return d},clearInterval:function(a){window.clearInterval(a);this.intervals=this.intervals.without(a)},isLingering:function(){return!this.registered},
deinitialize:function(){if(this.registered){if(this.onDone)this.onDone();for(;0<this.intervals.length;)window.clearInterval(this.intervals.pop());for(;0<this.observers.length;){var a=this.observers.pop();Event.stopObserving(a._element,a._eventName,a._handler)}}else debugger;this.deregister();this.registered=!1}});
Prado.WebUI.PostBackControl=Class.create(Prado.WebUI.Control,{onInit:function(a){this._elementOnClick=null;if(this.element)"function"==typeof this.element.onclick&&(this._elementOnClick=this.element.onclick.bind(this.element),this.element.onclick=null),this.observe(this.element,"click",this.elementClicked.bindEvent(this,a));else debugger},elementClicked:function(a,b){var c=Event.element(a),d=!0,e=null;this._elementOnClick&&(e=this._elementOnClick(a),"boolean"==typeof e&&(d=e));if(d&&!Prado.Element.isDisabled(c))this.onPostBack(a,
b);"boolean"!=typeof e||e||Event.stop(a)},onPostBack:function(a,b){Prado.PostBack(a,b)}});Prado.WebUI.TButton=Class.create(Prado.WebUI.PostBackControl);Prado.WebUI.TLinkButton=Class.create(Prado.WebUI.PostBackControl);Prado.WebUI.TCheckBox=Class.create(Prado.WebUI.PostBackControl);Prado.WebUI.TBulletedList=Class.create(Prado.WebUI.PostBackControl);Prado.WebUI.TImageMap=Class.create(Prado.WebUI.PostBackControl);
Prado.WebUI.TImageButton=Class.create(Prado.WebUI.PostBackControl,{onPostBack:function(a,b){this.addXYInput(a,b);Prado.PostBack(a,b);this.removeXYInput(a,b)},addXYInput:function(a,b){var c=this.element.cumulativeOffset(),d=[a.clientX,a.clientY],e=d[0]-c[0]+1,c=d[1]-c[1]+1,e=0>e?0:e,c=0>c?0:c,d=b.EventTarget,f=$(d+"_x"),g=$(d+"_y");f?f.value=e:(f=INPUT({type:"hidden",name:d+"_x",id:d+"_x",value:e}),this.element.parentNode.appendChild(f));g?g.value=c:(g=INPUT({type:"hidden",name:d+"_y",id:d+"_y",value:c}),
this.element.parentNode.appendChild(g))},removeXYInput:function(a,b){var c=b.EventTarget;this.element.parentNode.removeChild($(c+"_x"));this.element.parentNode.removeChild($(c+"_y"))}});Prado.WebUI.TRadioButton=Class.create(Prado.WebUI.PostBackControl,{initialize:function($super,b){(this.element=$(b.ID))&&(this.element.checked||$super(b))}});
Prado.WebUI.TTextBox=Class.create(Prado.WebUI.PostBackControl,{onInit:function(a){this.options=a;"MultiLine"!=this.options.TextMode&&this.observe(this.element,"keydown",this.handleReturnKey.bind(this));1==this.options.AutoPostBack&&this.observe(this.element,"change",Prado.PostBack.bindEvent(this,a))},handleReturnKey:function(a){if(Event.keyCode(a)==Event.KEY_RETURN){var b=Event.element(a);if(b)if(1==this.options.AutoPostBack)Event.fireEvent(b,"change"),Event.stop(a);else if(this.options.CausesValidation&&
"undefined"!=typeof Prado.Validation&&!Prado.Validation.validate(this.options.FormID,this.options.ValidationGroup,$(this.options.ID)))return Event.stop(a)}}});Prado.WebUI.TListControl=Class.create(Prado.WebUI.PostBackControl,{onInit:function(a){this.observe(this.element,"change",Prado.PostBack.bindEvent(this,a))}});Prado.WebUI.TListBox=Class.create(Prado.WebUI.TListControl);Prado.WebUI.TDropDownList=Class.create(Prado.WebUI.TListControl);
Prado.WebUI.DefaultButton=Class.create(Prado.WebUI.Control,{onInit:function(a){this.options=a;this.observe(a.Panel,"keydown",this.triggerEvent.bindEvent(this))},triggerEvent:function(a,b){var c=Event.keyCode(a)==Event.KEY_RETURN,d="textarea"==Event.element(a).tagName.toLowerCase(),e="a"==Event.element(a).tagName.toLowerCase()&&Event.element(a).hasAttribute("href"),f="input"==Event.element(a).tagName.toLowerCase()&&"submit"==Event.element(a).type.toLowerCase();!c||d||f||e||!(c=$(this.options.Target))||
(this.triggered=!0,Event.fireEvent(c,this.options.Event),Event.stop(a))}});Prado.WebUI.TTextHighlighter=Class.create();Prado.WebUI.TTextHighlighter.prototype={initialize:function(a){window.clipboardData&&(a=DIV({className:"copycode"},A({href:"javascript:;//copy code to clipboard",onclick:"Prado.WebUI.TTextHighlighter.copy(this)",onmouseover:"Prado.WebUI.TTextHighlighter.hover(this)",onmouseout:"Prado.WebUI.TTextHighlighter.out(this)"},"Copy Code")),document.write(DIV(null,a).innerHTML))}};
Object.extend(Prado.WebUI.TTextHighlighter,{copy:function(a){a=a.parentNode.parentNode.parentNode;for(var b="",c=0;c<a.childNodes.length;c++)var d=a.childNodes[c],b=d.innerText?b+("Copy Code"==d.innerText?"":d.innerText):b+d.nodeValue;0<b.length&&window.clipboardData.setData("Text",b)},hover:function(a){a.parentNode.className="copycode copycode_hover"},out:function(a){a.parentNode.className="copycode"}});
Prado.WebUI.TCheckBoxList=Base.extend({constructor:function(a){Prado.Registry.set(a.ListID,this);for(var b=0;b<a.ItemCount;b++){var c=Object.extend({ID:a.ListID+"_c"+b,EventTarget:a.ListName+"$c"+b},a);new Prado.WebUI.TCheckBox(c)}}});Prado.WebUI.TRadioButtonList=Base.extend({constructor:function(a){Prado.Registry.set(a.ListID,this);for(var b=0;b<a.ItemCount;b++){var c=Object.extend({ID:a.ListID+"_c"+b,EventTarget:a.ListName+"$c"+b},a);new Prado.WebUI.TRadioButton(c)}}});